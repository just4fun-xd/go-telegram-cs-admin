# go-telegram-cs-admin

[![Go](https://img.shields.io/badge/-Go-00ADD8?style=flat&logo=Go&logoColor=ffffff)](https://golang.org/)
[![SQLite](https://img.shields.io/badge/-SQLite-003B57?style=flat&logo=SQLite&logoColor=ffffff)](https://www.sqlite.org/)

## Описание

**go-telegram-cs-admin** — это Telegram-бот на Go, помогающий быстро организовывать встречи. Бот создаёт встроенные опросы (Polls) в чате, хранит данные в **SQLite**, отправляет напоминания о встречах и позволяет вручную закрывать опросы или заменять пользователей.

## Содержание

1. [Описание](#описание)  
2. [Функционал](#функционал)  
3. [Структура проекта](#структура-проекта)  
4. [Установка и запуск](#установка-и-запуск)  
5. [Использование](#использование)  
6. [Отладочный режим](#отладочный-режим)  
7. [Контакты](#контакты)

## Функционал

- **Создание недельного опроса** `/poll` (опрос не закрывается автоматически).
- **Создание дневного опроса** `/poll_day DD.MM` (опрос закрывается автоматически).
- **Ручное закрытие** `/close_pool` (ответ на сообщение с опросом).
- **Список участников** `/players` (ответ на сообщение с опросом).
- **Замена пользователя** `/replace @OldUser @NewUser` (перенос голосов одного участника другому).
- **Напоминания** (за 2 дня или через 30 секунд в режиме отладки), отображающие список проголосовавших.
- **Неизвестные команды или обычный текст** — бот тихо подсказывает `/help`.
- **Команда** `/help` выводит список команд (также тихо).

## Структура проекта

```bash
.
├── README.md
├── cmd
│   └── bot
│       └── main.go              # Точка входа в приложение
├── config
│   └── config.go                # Загрузка переменных окружения (.env)
├── internal
│   ├── bot
│   │   ├── handlers.go          # Обработка команд и обычных сообщений
│   │   ├── poll.go              # Создание опроса
│   │   ├── poll_handler.go      # Обработка голосов (poll_answer)
│   │   ├── reminders.go         # Горутина для отправки напоминаний
│   │   ├── replace.go           # Логика /replace
│   │   ├── close_poll.go        # Логика /close_pool
│   │   └── ...
│   └── db
│       ├── db.go                # Инициализация базы (SQLite)
│       └── models.go            # Модели (Poll, Vote)
├── constants
│   └── messages.go              # Текстовые константы бота
├── pkg
│   └── utils
│       └── utils.go             # Генерация вариантов опроса и пр.
├── go.mod
├── go.sum
└── .env.example                 # Пример .env файла
```

## Установка и запуск

Склонировать репозиторий:

```bash
git clone https://github.com/just4fun-xd/go-telegram-cs-admin.git
```

Перейти в папку проекта:

```bash
cd go-telegram-cs-admin
```

Создать .env (по примеру .env.example):

```bash
TELEGRAM_BOT_TOKEN=your_bot_token
DEBUG_REMINDERS=0
```

Установить зависимости и собрать проект:

```bash
go mod tidy
go build ./cmd/bot
```

Запустить бота:

```bash
go run cmd/bot/main.go
```

или (если собран бинарник):

```bash
./bot
```

После первого запуска бот создаст локальный bot.db (SQLite) — базу данных для хранения опросов и голосов.


## Отладочный режим

Установите DEBUG_REMINDERS=1 в .env, чтобы напоминания приходили через 30 секунд вместо -2 дней.
Это удобно для быстрой проверки функционала напоминаний.

## Контакты

### Автор проекта:
[Кирилл Шалыгин](https://github.com/just4fun-xd)